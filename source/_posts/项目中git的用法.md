---
title: 项目中git的用法
date: 2017-11-29 19:09:35
tags:
    - git
---

之前弄个一个git的基本语法，现在来总结一下真正项目的过程中git经常用到的命令

### 一、基本操作
#### 1.1 创建版本库
在空目录里，使用此命令将这个目录变成git可以管理的仓库
```
git init
```

#### 1.2. 将文件放到仓库
将文件放到仓库需要两步
1. 将文件添加到仓库
    ```
    git add .   //用.是提交所有文件，可以把.换成单独的文件名
    ```
2. 把文件提交到仓库
    ```
    git commit -m"备注内容"
    ```

<!--more-->

#### 1.3. 查看状态
1. 查看仓库信息
    ```
    git status
    ```
2. 查看具体修改了哪些内容
    ```
    git diff
    ```

#### 1.4. 查看日志
查看提交日志
```
git log
```

#### 1.5. 版本回退
- git中，HEAD表示当前版本，上个版本就是HEAD^ ，上上一版本就是HEAD^^，也可以用HEAD~2来表示上上一版本。
- 回溯版本
    ```
    git reset
    ```
- 又后悔了，不想回到这个版本，可以得到commit id来返回 

- 找不到id可以查看我们所有使用过的命令
    ```
    git reflog
    ```

#### 1.6. 删除文件
- 如果本地的文件删除了
    - 要从版本库中删除该文件
        ```
        git rm  //删除
        git commit
        ```
    - 删错了，要把误删的文件恢复到最新版本
        ```
        git checkout
        ```
#### 1.7. 从github克隆
```
git clone ...
```

### 二、分支
#### 2.1 创建分支
首先要创建分支，并切换到该分支
```
git branch dev //创建dev分支
git checkout dev    //切换到dev分支
```
查看分支状态
```
git branch
```

#### 2.2 合并分支
要将dev分支中的内容合并到master分支中
```
git merge dev
```

#### 2.3 删除分支
```
git branch -d dev
```

#### 2.4 解决冲突
git无法自动合并分支时，就必须首先解决冲突，解决冲突后，再提交，合并完成

#### 2.5 分支挂起
现实场景中有可能出现以下情况，比如我们正在dev分支中进行项目工作，但是突然出现一个bug工作需要修改，这时会出现一个issue分支来修复它，但是我们的dev分支又没有完成，只能暂时挂起。
- 将现场工作挂起，等以后恢复现场后再继续工作
    ```
    git stash
    ```
- 查看挂起的工作现场
    ```
    git stash list
    ```
- 恢复
    ```
    git stash applu
    ```
